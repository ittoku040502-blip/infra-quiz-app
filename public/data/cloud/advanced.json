{
  "questions": [
    {
      "id": "cloud_advanced_001",
      "question": "AIチャットアプリのデータベース（RDS/Cloud SQL）が、データセンターの障害で停止してしまいました。障害発生時に自動で予備サーバーに切り替わり、停止時間を最小限にする構成は？",
      "choices": [
        "リードレプリカ（Read Replica）を作成する",
        "データベースのバックアップ頻度を上げる",
        "マルチAZ（Multi-AZ）/ 高可用性（HA）構成にする",
        "より高性能なインスタンスタイプに変更する"
      ],
      "correctAnswer": 2,
      "explanation": "🎯 **AI時代でこう使う**\nサービスが「止まらない」ことはユーザーの信頼に直結します。AIが24時間稼働する今、単一障害点（SPOF）をなくす設計は必須です。\n\n📖 **基礎知識**\n**マルチAZ（アベイラビリティゾーン）**や**高可用性（HA）**構成は、物理的に離れた場所に予備（スタンバイ）のデータベースを用意し、データを同期する仕組みです。メインが壊れたら自動で予備に切り替わります（フェイルオーバー）。\n\n💡 **実務での具体例**\n・**シーン1:** 本番環境のDB作成時、「マルチAZ配置」のチェックボックスを必ずオンにする。\n・**シーン2:** メンテナンス時も、スタンバイ側を更新してから切り替えるため停止時間が短い。\n・**シーン3:** コストは2倍になるが、本番環境では「保険料」として割り切る判断。",
      "difficulty": "advanced",
      "category": "production-best-practices"
    },
    {
      "id": "cloud_advanced_002",
      "question": "運用ミスで本番データベースのデータを誤って削除してしまいました。バックアップから「事故発生の5分前」の状態にデータを復元できる機能は？",
      "choices": [
        "ポイントインタイムリカバリ（PITR）",
        "スナップショット",
        "レプリケーション",
        "オートスケーリング"
      ],
      "correctAnswer": 0,
      "explanation": "🎯 **AI時代でこう使う**\nAIによる自動処理がデータを壊すリスクや、開発者の操作ミスに備える「タイムマシン」機能です。これがないと怖くて本番操作できません。\n\n📖 **基礎知識**\n**ポイントインタイムリカバリ（PITR）**は、定期バックアップとトランザクションログを組み合わせて、「特定の日時（分単位）」を指定してデータを復元する機能です。\n\n💡 **実務での具体例**\n・**シーン1:** 「14:00に誤ってデータを消した」→「13:55時点の状態で新しいDBを作成」して復旧。\n・**シーン2:** 復元には時間がかかるため、RTO（目標復旧時間）を意識して設計する。\n・**シーン3:** 本番稼働前に、バックアップ保持期間（通常7〜35日）の設定を確認する。",
      "difficulty": "advanced",
      "category": "production-best-practices"
    },
    {
      "id": "cloud_advanced_003",
      "question": "AI画像生成サービスの表示速度を上げるためCDN（CloudFront）を導入しましたが、画像を更新しても古い画像が表示され続けます。即座に新しい画像を反映させる操作は？",
      "choices": [
        "オリジンサーバー（S3）を再起動する",
        "ブラウザのスーパーリロードを行う",
        "CDNのキャッシュ削除（Invalidation / Purge）を行う",
        "DNSのTTLを短くする"
      ],
      "correctAnswer": 2,
      "explanation": "🎯 **AI時代でこう使う**\n「AIモデルを更新したのに結果が変わらない」といったトラブルの多くはキャッシュが原因です。正しい更新手順を知る必要があります。\n\n📖 **基礎知識**\nCDNは一度取得したデータをエッジサーバーに**キャッシュ**（一時保存）します。ファイル名が同じ場合、有効期限（TTL）が切れるまで古いデータを返し続けます。強制的に更新するには**キャッシュ削除（Invalidation）**が必要です。\n\n💡 **実務での具体例**\n・**シーン1:** サイト更新後、CloudFrontコンソールから `/*` または特定のパスを指定してInvalidationを実行。\n・**シーン2:** 頻繁に更新されるファイルには、ファイル名にバージョン（`img_v2.jpg`）を付けるのがベストプラクティス。\n・**シーン3:** キャッシュ削除には追加料金がかかる場合があるため、乱用は避ける。",
      "difficulty": "advanced",
      "category": "performance-optimization"
    },
    {
      "id": "cloud_advanced_004",
      "question": "AIアプリの検索機能へのアクセスが急増し、データベース（RDS）のCPU負荷が100%になり応答しなくなりました。書き込みは少なく、読み込みが9割です。最も効果的な対策は？",
      "choices": [
        "キャッシュ（ElastiCache/Redis）を導入する、またはリードレプリカを追加する",
        "データベースを再起動する",
        "ストレージ容量を増やす",
        "インデックスを削除する"
      ],
      "correctAnswer": 0,
      "explanation": "🎯 **AI時代でこう使う**\nAIサービスの多くは「学習（書き込み）」より「推論結果の参照（読み込み）」が圧倒的に多いです。読み込み負荷を分散させる設計がサービスの寿命を決めます。\n\n📖 **基礎知識**\n読み込み専用の複製データベースである**リードレプリカ**を作成し、参照系のクエリをそちらに流すことで、マスターDBの負荷を下げられます。また、Redisなどの**インメモリキャッシュ**を使うのも有効です。\n\n💡 **実務での具体例**\n・**シーン1:** アプリのDB接続設定を「書き込み用（マスター）」と「読み込み用（レプリカ）」に分ける。\n・**シーン2:** 頻繁にアクセスされるAIの回答結果をRedisにキャッシュし、DBアクセス自体を減らす。\n・**シーン3:** レプリカには数ミリ秒の遅延（ラグ）があることを考慮する。",
      "difficulty": "advanced",
      "category": "performance-optimization"
    },
    {
      "id": "cloud_advanced_005",
      "question": "顧客の個人情報を含むデータベースを構築します。セキュリティを高めるため、インターネットから直接アクセスできない「プライベートサブネット」に配置しました。メンテナンスのために管理者が接続するにはどうすべき？",
      "choices": [
        "DBにパブリックIPを付与し、セキュリティグループでIP制限をかける",
        "データベースのポートを80番に変更する",
        "踏み台サーバー（Bastion）を経由するか、SSM Session Manager（AWS）等を使用する",
        "ファイアウォールを一時的に無効化する"
      ],
      "correctAnswer": 2,
      "explanation": "🎯 **AI時代でこう使う**\nAI学習データや顧客データは企業の命です。DBをインターネットに晒す設定は、一発で情報漏洩につながる「やってはいけない」構成です。\n\n📖 **基礎知識**\nDBは**プライベートサブネット**（インターネットへの出口がない場所）に置くのが鉄則です。接続するには、パブリックサブネットに置いた**踏み台サーバー**を経由するか、クラウドの管理機能（SSMなど）を使って安全にトンネリングします。\n\n💡 **実務での具体例**\n・**シーン1:** ローカルPCからSSHポートフォワーディングを使って、踏み台経由でDBに接続。\n・**シーン2:** AWS Systems Manager (SSM) を使えば、SSH鍵管理すら不要でブラウザから接続可能。\n・**シーン3:** 「DBのエンドポイントに繋がらない」トラブル時は、このネットワーク経路を確認する。",
      "difficulty": "advanced",
      "category": "security-advanced"
    },
    {
      "id": "cloud_advanced_006",
      "question": "EC2上のAIアプリからS3バケットのデータを読み書きしたいです。アクセスキー（AK/SK）をコードに埋め込むのが危険な理由と、正しい方法は？",
      "choices": [
        "キーが漏洩するリスクがあるため、IAMロールをEC2インスタンスに割り当てる",
        "キーの文字数が多くてコードが読みにくくなるため、短縮URLを使う",
        "キーを使うと料金が高くなるため、パスワード認証を使う",
        "S3はキーなしで誰でもアクセスできるように設定すべき"
      ],
      "correctAnswer": 0,
      "explanation": "🎯 **AI時代でこう使う**\n「GitHubにキーを上げてしまい不正利用」はクラウド初心者の通過儀礼ですが、企業では許されません。キーを持たない（キーレス）アーキテクチャを目指します。\n\n📖 **基礎知識**\n長期的な認証情報（アクセスキー）の発行は避け、一時的な権限を付与する**IAMロール**を使用します。EC2やLambdaにロールを紐付ける（アタッチする）と、SDKが自動で一時キーを取得してくれます。\n\n💡 **実務での具体例**\n・**シーン1:** コード内の `AWS_ACCESS_KEY_ID` を削除し、boto3などのSDKのデフォルト認証に任せる。\n・**シーン2:** IAMロールに「S3ReadOnly」など必要最小限の権限を与える。\n・**シーン3:** 万が一キーが必要な場合も、ローカル環境変数のみに留める。",
      "difficulty": "advanced",
      "category": "security-advanced"
    },
    {
      "id": "cloud_advanced_007",
      "question": "機密性の高いAIモデルデータをS3に保存します。万が一、ディスクが物理的に盗まれたり、不正アクセスされたりしても中身を読めなくするための対策は？",
      "choices": [
        "バケットを非公開設定にする",
        "ファイル名を暗号化する",
        "HTTPSでのみアップロードを許可する",
        "サーバーサイド暗号化（SSE-S3 / SSE-KMS）を有効にする"
      ],
      "correctAnswer": 3,
      "explanation": "🎯 **AI時代でこう使う**\nエンタープライズ（企業）向けのAI案件では「保存データの暗号化（Encryption at Rest）」は必須要件です。ボタン一つでできるので必ず設定しましょう。\n\n📖 **基礎知識**\n**サーバーサイド暗号化**は、クラウド事業者がデータをディスクに書き込む直前に自動で暗号化し、読み出す時に復号する機能です。鍵管理サービス（KMS）と連携すれば、鍵の使用履歴も監査できます。\n\n💡 **実務での具体例**\n・**シーン1:** S3バケット作成時に「デフォルトの暗号化」を有効にする。\n・**シーン2:** RDSやEBSボリュームも作成時に「暗号化」にチェックを入れる。\n・**シーン3:** 監査担当者に「データはAES-256で暗号化されています」と報告する。",
      "difficulty": "advanced",
      "category": "security-advanced"
    },
    {
      "id": "cloud_advanced_008",
      "question": "今後1年間、24時間稼働し続けることが確定しているAI推論用のGPUサーバーがあります。定価（オンデマンド）よりも大幅に安く利用するための契約形態は？",
      "choices": [
        "スポットインスタンス / Preemptible VMs",
        "専用ホスト (Dedicated Hosts)",
        "無料利用枠",
        "リザーブドインスタンス (RI) / Savings Plans / 確約利用割引 (CUD)"
      ],
      "correctAnswer": 3,
      "explanation": "🎯 **AI時代でこう使う**\nGPUインスタンスは高額です。長期運用の見通しが立っているなら、「予約」することでコストを30〜70%削減できます。\n\n📖 **基礎知識**\n**リザーブドインスタンス（RI）**や**Savings Plans**（AWS）、**確約利用割引（CUD）**（GCP）は、「1年または3年使う」と約束する代わりに料金が割引かれる仕組みです。\n\n💡 **実務での具体例**\n・**シーン1:** 開発フェーズが終わって本番運用に入るタイミングで購入を検討する。\n・**シーン2:** インスタンスサイズが変わる可能性があるなら、柔軟性の高い「Compute Savings Plans」を選ぶ。\n・**シーン3:** 経営陣に「年間コストを半額にできます」と提案する。",
      "difficulty": "advanced",
      "category": "cost-optimization-advanced"
    },
    {
      "id": "cloud_advanced_009",
      "question": "大量のAI学習ジョブを実行したいですが、計算はいつ終わっても良く、途中で中断されても再実行可能です。最もコストを抑えられるインスタンスタイプは？",
      "choices": [
        "オンデマンドインスタンス",
        "スポットインスタンス / Preemptible VMs",
        "リザーブドインスタンス",
        "ハイメモリインスタンス"
      ],
      "correctAnswer": 1,
      "explanation": "🎯 **AI時代でこう使う**\nAIの学習やバッチ処理など、「失敗してもやり直せる」処理には、クラウドの余り物を格安で借りるこの方法が最適です。\n\n📖 **基礎知識**\n**スポットインスタンス**（AWS）や**Preemptible VMs**（GCP）は、クラウドの空きリソースを最大90%OFFで利用できます。ただし、空きがなくなると**強制終了（中断）**されるリスクがあります。\n\n💡 **実務での具体例**\n・**シーン1:** 学習スクリプトに「途中経過を保存（チェックポイント）」する機能を実装し、中断されても続きから再開できるようにする。\n・**シーン2:** バッチ処理基盤（AWS Batch等）でスポットインスタンスを指定する。\n・**シーン3:** Webサーバーなどの「落ちてはいけない」用途には使わない。",
      "difficulty": "advanced",
      "category": "cost-optimization-advanced"
    },
    {
      "id": "cloud_advanced_010",
      "question": "本番環境で「ユーザーから遅いと言われるが、原因がわからない」状態を防ぐために、CPU使用率以外に監視すべき重要なメトリクス（指標）の組み合わせは？",
      "choices": [
        "ディスク容量とメモリ使用量",
        "レイテンシ（応答時間）とエラー率（5xxエラーの数）",
        "毎月の請求金額",
        "ログインユーザー数"
      ],
      "correctAnswer": 1,
      "explanation": "🎯 **AI時代でこう使う**\nCPUが暇でも、アプリがエラーを吐いていたり、応答に10秒かかっていたらサービスとしては「死んでいる」のと同じです。ユーザー視点での監視が必要です。\n\n📖 **基礎知識**\nサーバーの健康状態（CPU/メモリ）だけでなく、**サービス品質**を監視します。**レイテンシ**（遅延）が悪化していないか、**5xxエラー**（サーバーエラー）が増えていないかをCloudWatch/Cloud Monitoringで監視し、閾値を超えたらアラートを飛ばします。\n\n💡 **実務での具体例**\n・**シーン1:** ロードバランサーのメトリクスで「TargetResponseTime」を監視。\n・**シーン2:** 「5xxエラーが1分間に5回以上出たらSlackに通知」を設定。\n・**シーン3:** AI推論APIのタイムアウト増加を検知して、スケールアウトさせる。",
      "difficulty": "advanced",
      "category": "production-best-practices"
    }
  ]
}